!function(e,t){"use strict";if(storageOK&&"3rd"==localStorage.GenkiEdition&&/\/privacy\/|\/report\/|\/help\/|\/donate\/|\/download\//.test(e.location.pathname)&&(t.getElementById("home-link").href+="lessons-3rd/",t.getElementById("footer-home").href+="lessons-3rd/"),"file:"==e.location.protocol)for(var a=t.getElementsByTagName("A"),r=0,n=a.length;r<n;r++)/http/.test(a[r].href)||(/\/$/.test(a[r].href)?a[r].href+="index.html":/\/#.*?$/.test(a[r].href)?a[r].href=a[r].href.replace(/(#.*?)$/,"index.html$1"):/\/\?.*?$/.test(a[r].href)&&(a[r].href=a[r].href.replace(/(\?.*?)$/,"index.html$1")));var l=t.getElementById("content").querySelectorAll("h1, h2, h3, h4, h5, h6");for(r=0,n=l.length;r<n;r++)l[r].id&&l[r].insertAdjacentHTML("afterbegin",'<a href="#'+l[r].id+'" class="anchor fa"><span class="anchor-icon">&#xf0c1;</span></a>');if(storageOK){var i=t.querySelector("footer"),o=t.createElement("LABEL"),c=t.createElement("DIV");o.id="light-switch",o.tabIndex=0,o.innerHTML='<input id="light-switch-checkbox" type="checkbox" '+("on"==localStorage.darkMode?'checked="true"':"")+"/><div></div>",o.onkeyup=function(e){"Enter"==e.key&&this.firstChild.click()},o.firstChild.onchange=function(){var a,r=t.documentElement;if(this.checked?(localStorage.darkMode="on",(a=t.createElement("LINK")).id="dark-mode",a.rel="stylesheet",a.href=getPaths()+"resources/css/stylesheet-dark.min.css",t.head.appendChild(a),r.className+=" dark-mode"):(localStorage.darkMode="off",(a=t.getElementById("dark-mode"))&&t.head.removeChild(a),r.className=r.className.replace(" dark-mode","")),e.KanjiCanvas){KanjiCanvas.darkMode=!!t.querySelector(".dark-mode"),KanjiCanvas.quizOver=!!t.querySelector(".quiz-over");for(var n=t.querySelectorAll(".kanji-canvas"),l=0,i=n.length;l<i;l++)KanjiCanvas["canvas_"+n[l].id]&&KanjiCanvas.redraw(n[l].id,!0,!!e.Genki&&Genki.strokeNumberDisplay)}},c.id="light-switch-container",c.innerHTML='<label id="light-switch-label" for="light-switch-checkbox">Dark Mode </label>',c.appendChild(o),i.appendChild(c)}t.addEventListener("keydown",function(e){if(e.ctrlKey&&e.altKey){var a;switch(e.key){case"Left":case"ArrowLeft":a=t.querySelector(".prev-ex");break;case"Right":case"ArrowRight":a=t.querySelector(".next-ex");break;case"e":a=t.getElementById("toggle-exercises");break;case"q":a=t.getElementById("quick-jisho-toggle");break;case"d":a=t.getElementById("light-switch");break;case"f":a=t.getElementById("toggle-furigana");break;case"r":a=t.getElementById("random-exercise")}a&&(e.preventDefault(),a.click())}})}(window,document);