!function(e,i){"use strict";Genki.appendix={jisho:{mode:"ja",selected:[],init:function(){for(var s,n,a=i.querySelectorAll(".definition"),l=0,t=a.length,r=e.localStorage&&localStorage.selectedDefinitions?localStorage.selectedDefinitions.split(","):[],o=[],c={},u=0;l<t;l++)n=a[l].querySelector(".def-en"),/.*?-\d+/.test(a[l].dataset.def)&&n.innerHTML?(a[l].insertAdjacentHTML("afterbegin",'<input class="def-selector genki_input_hidden" type="checkbox" onchange="Genki.appendix.jisho.updateCheckboxes(this, \''+a[l].dataset.def+"');\""+(-1!=r.indexOf(a[l].dataset.def)?"checked":"")+'><span class="genki_pseudo_checkbox" onclick="this.previousSibling.click(); return false;"/>'),c[s=n.innerHTML.replace(/^\(.*?\) |^to |^the |^it |^\.\.\.(?:,|)/gi,"").toLowerCase()]&&(s=s+"-"+ ++u),c[s]=a[l].cloneNode(!0),o.push(s)):a[l].innerHTML="<em>Coming soon...</em>";for(l=0,t=(o=o.sort()).length;l<t;l++)(n=c[o[l]].innerHTML.match(/<span class="def-en">(.*?)<\/span>/))[0]&&(c[o[l]].innerHTML=c[o[l]].innerHTML.replace(/<span class="def-en">.*?<\/span>/,"").replace(/(<input.*?<\/span>)/,"$1"+n[0]+" "),i.getElementById("list-"+o[l].charAt(0).toUpperCase()).appendChild(c[o[l]]));Genki.appendix.jisho.restoreSettings(),AddJumpArrowsTo(".dictionary-group .section-title","dictionary-top","Return to the top of the dictionary"),i.getElementById("exercise-title").insertAdjacentHTML("beforeend"," Word Practice"),Genki.appendix.finishedLoading()},switchMode:function(s){var n={button:i.getElementById("ja-mode"),dict:i.getElementById("japanese-english")},a={button:i.getElementById("en-mode"),dict:i.getElementById("english-japanese")};"ja"==s&&"ja"!=Genki.appendix.jisho.mode?(n.button.className+=" active-mode",a.button.className=a.button.className.replace(" active-mode",""),n.dict.style.display="",a.dict.style.display="none"):"en"==s&&"en"!=Genki.appendix.jisho.mode&&(a.button.className+=" active-mode",n.button.className=n.button.className.replace(" active-mode",""),a.dict.style.display="",n.dict.style.display="none"),e.localStorage&&(Genki.appendix.jisho.mode=s,localStorage.genkiJishoMode=s)},updateCheckboxes:function(s,n,a){var l=i.querySelectorAll('[data-def="'+n+'"] .def-selector'),t=Genki.appendix.jisho.selected.indexOf(n),r=0,o=l.length;if(s.checked){for(;r<o;r++)s!=l[r]&&(l[r].checked=!0);-1==t&&Genki.appendix.jisho.selected.push(n)}else if(!s.checked){for(;r<o;r++)s!=l[r]&&(l[r].checked=!1);-1!=t&&Genki.appendix.jisho.selected.splice(t,1)}!a&&e.localStorage&&(localStorage.selectedDefinitions=Genki.appendix.jisho.selected)},selectAll:function(s,n,a){for(var l=i.querySelectorAll(a?n:("ja"==Genki.appendix.jisho.mode?"#japanese-english":"#english-japanese")+(n?" #"+n:"")+" .def-selector"),t=0,r=l.length;t<r;t++)l[t].checked=s,Genki.appendix.jisho.updateCheckboxes(l[t],l[t].parentNode.dataset.def,!0);e.localStorage&&(localStorage.selectedDefinitions=Genki.appendix.jisho.selected)},search:function(e,s){var n=i.createDocumentFragment(),a=i.getElementById("dict-search-results-"+s),l=i.getElementById("dict-search-hits-"+s),t=i.querySelectorAll(("ja"==s?"#japanese-english":"#english-japanese")+" .dictionary-group .definition"),r=t.length,o=0,c=0;if(a.innerHTML="",e)for(;c<r;c++)/.*?-\d+/.test(t[c].dataset.def)&&-1!=t[c].innerText.toLowerCase().indexOf(e.toLowerCase())&&(n.appendChild(t[c].cloneNode(!0)),o++);n.childNodes.length?(a.parentNode.querySelector(".group-selectors").style.visibility="",a.appendChild(n)):(a.parentNode.querySelector(".group-selectors").style.visibility="hidden",a.innerHTML=e?'<li>No results found for "'+e+'".</li>':""),l.innerHTML=o?"("+o+") ":""},launchExercise:function(){var s=Genki.appendix.jisho.selected.length;s<5?GenkiModal.open({title:"Please select more words.",content:"Please select <b>"+(5-s)+"</b> more word"+(5-s==1?"":"s")+" to begin a practice exercise."}):GenkiModal.open({title:"Begin Practice?",content:'Are you ready to practice your selected words? Please select the type of exercise you would like to practice with below.<br><br><div class="center"><select id="dict-exercise-type"><option value="multi"'+(e.localStorage&&"multi"==localStorage.genkiJishoExercise?" selected":"")+'>Multiple Choice</option><option value="drag"'+(e.localStorage&&"drag"==localStorage.genkiJishoExercise?" selected":"")+'>Drag and Drop</option><option value="writing"'+(e.localStorage&&"writing"==localStorage.genkiJishoExercise?" selected":"")+'>Spelling Practice</option><option value="fill"'+(e.localStorage&&"fill"==localStorage.genkiJishoExercise?" selected":"")+">Write the Definition</option></select></div>",callback:function(){var n,a,l,t,r,o,c,u,p=i.getElementById("dict-exercise-type").value,d=Genki.appendix.jisho.selected,f=0;if(e.localStorage&&(localStorage.genkiJishoExercise=p),i.getElementById("appendix-tool").style.display="none",i.getElementById("exercise").style.display="","drag"==p){for(u={};f<s;f++)c=(o=i.querySelector('#japanese-english [data-def="'+d[f]+'"]')).querySelector(".def-furi i"),u[o.querySelector(".def-ja").innerHTML.replace(/<i>.*?<\/i>/,"")+(c?"|"+c.innerHTML:"")]=o.querySelector(".def-en").innerHTML;Genki.generateQuiz({type:p,info:Genki.lang.std_drag,quizlet:u})}else if("multi"==p){for(u=[];f<s;f++)for(c=(o=i.querySelector('#japanese-english [data-def="'+d[f]+'"]')).querySelector(".def-furi i"),r=o.querySelector(".def-en").innerHTML,u[f]={question:o.querySelector(".def-ja").innerHTML.replace(/<i>.*?<\/i>/,"")+(c?'<div class="furigana">'+c.innerHTML+"</div>":""),answers:["A"+r]},(l=d.slice()).splice(f,1),a=3;a-- >0&&l.length;)n=Math.floor(Math.random()*l.length),(t=i.querySelector('#japanese-english [data-def="'+l[n]+'"] .def-en').innerHTML)==r?a++:u[f].answers.push("A"==t.charAt(0)?"!"+t:t),l.splice(n,1);Genki.generateQuiz({type:p,info:"Choose the correct definition for each word.",quizlet:u})}else if("writing"==p){for(u={};f<s;f++)c=(o=i.querySelector('#japanese-english [data-def="'+d[f]+'"]')).querySelector(".def-furi i"),u[o.querySelector(".def-ja").innerHTML.replace(/<i>.*?<\/i>/,"")]=c?c.innerHTML:"";Genki.generateQuiz({type:p,info:"Practice spelling the following words.",columns:6,quizlet:u})}else if("fill"==p){for(u='<div class="count-problems columns-2 clear"><div>',n=Math.ceil(s/2);f<s;f++)c=(o=i.querySelector('#japanese-english [data-def="'+d[f]+'"]')).querySelector(".def-furi i"),u+=(f==n?"</div><div>":"")+'<div class="problem">'+o.querySelector(".def-en").innerHTML+"<br>"+("{"+o.querySelector(".def-ja").innerHTML.replace(/<i>.*?<\/i>/,"")+(c?"|"+c.innerHTML+"|answer":"")+"}").replace(/（(.*?)）/g,"%($1/)")+"</div>";Genki.generateQuiz({type:p,info:"Write the Japanese definition for the following words.",quizlet:u+"</div></div>"})}}})},reset:function(){Genki.exerciseComplete=!1,Genki.stats={problems:0,solved:0,mistakes:0,score:0,exclude:0};var e=i.getElementById("exercise");e.style.display="none",e.className="content-block",e.innerHTML=i.getElementById("exercise-title").outerHTML+'<div id="quiz-result"></div><div id="quiz-zone" class="clear"></div><div id="quiz-timer" class="center"></div>'+i.querySelector(".more-exercises").outerHTML,i.getElementById("appendix-tool").style.display="",Genki.scrollTo("#pratice-words"),Genki.appendix.jisho.launchExercise()},restoreSettings:function(){e.localStorage&&(localStorage.genkiJishoMode&&"ja"!=localStorage.genkiJishoMode&&Genki.appendix.jisho.switchMode(localStorage.genkiJishoMode),localStorage.selectedDefinitions&&(Genki.appendix.jisho.selected=localStorage.selectedDefinitions.split(",")))}},studyMap:function(){GenkiModal.open({title:"Study Map of Japan?",content:'Are you ready to study the map of Japan? Please select the quiz you would like to take below.<br><br><div class="center"><select id="selected-map"><option value="1"'+(e.localStorage&&"1"==localStorage.genkiSelectedMap?" selected":"")+'>Hokkaido and Tohoku Region (1-8)</option><option value="2"'+(e.localStorage&&"2"==localStorage.genkiSelectedMap?" selected":"")+'>Kanto Region (9-15)</option><option value="3"'+(e.localStorage&&"3"==localStorage.genkiSelectedMap?" selected":"")+'>Chubu Region (16-23)</option><option value="4"'+(e.localStorage&&"4"==localStorage.genkiSelectedMap?" selected":"")+'>Kinki Region (24-30)</option><option value="5"'+(e.localStorage&&"5"==localStorage.genkiSelectedMap?" selected":"")+'>Chugoku and Shikoku Region (31-39)</option><option value="6"'+(e.localStorage&&"6"==localStorage.genkiSelectedMap?" selected":"")+'>Kyushu Region (40-47)</option><option value="7"'+(e.localStorage&&"7"==localStorage.genkiSelectedMap?" selected":"")+'>Cities and Landmarks 1 (48-58)</option><option value="8"'+(e.localStorage&&"8"==localStorage.genkiSelectedMap?" selected":"")+">Cities and Landmarks 2 (59-69)</option></select></div>",callback:function(){var s,n,a,l,t,r,o=i.getElementById("selected-map"),c=i.getElementById("exercise-title"),u=o.options[o.selectedIndex].innerHTML.replace(/\(.*?\)$/,"Quiz"),p=+o.value,d=[],f=[];switch(e.localStorage&&(localStorage.genkiSelectedMap=p),p){case 1:s="1-8",a=[{question:'<span class="inline-furi">北海道<i class="furigana">ほっかいどう</i></span>',answers:["A1"]},{question:'<span class="inline-furi">青森県<i class="furigana">あおもりけん</i></span>',answers:["A2"]},{question:'<span class="inline-furi">秋田県<i class="furigana">あきたけん</i></span>',answers:["A3"]},{question:'<span class="inline-furi">岩手県<i class="furigana">いわてけん</i></span>',answers:["A4"]},{question:'<span class="inline-furi">山形県<i class="furigana">やまがたけん</i></span>',answers:["A5"]},{question:'<span class="inline-furi">宮城県<i class="furigana">みやぎけん</i></span>',answers:["A6"]},{question:'<span class="inline-furi">新潟県<i class="furigana">にいがたけん</i></span>',answers:["A7"]},{question:'<span class="inline-furi">福島県<i class="furigana">ふくしまけん</i></span>',answers:["A8"]}];break;case 2:s="9-15",a=[{question:'<span class="inline-furi">群馬県<i class="furigana">ぐんまけん</i></span>',answers:["A9"]},{question:'<span class="inline-furi">栃木県<i class="furigana">とちぎけん</i></span>',answers:["A10"]},{question:'<span class="inline-furi">茨城県<i class="furigana">いばらきけん</i></span>',answers:["A11"]},{question:'<span class="inline-furi">埼玉県<i class="furigana">さいたまけん</i></span>',answers:["A12"]},{question:'<span class="inline-furi">東京都<i class="furigana">とうきょうと</i></span>',answers:["A13"]},{question:'<span class="inline-furi">千葉県<i class="furigana">ちばけん</i></span>',answers:["A14"]},{question:'<span class="inline-furi">神奈川県<i class="furigana">かながわけん</i></span>',answers:["A15"]}];break;case 3:s="16-23",a=[{question:'<span class="inline-furi">山梨県<i class="furigana">やまなしけん</i></span>',answers:["A16"]},{question:'<span class="inline-furi">長野県<i class="furigana">ながのけん</i></span>',answers:["A17"]},{question:'<span class="inline-furi">静岡県<i class="furigana">しずおかけん</i></span>',answers:["A18"]},{question:'<span class="inline-furi">富山県<i class="furigana">とやまけん</i></span>',answers:["A19"]},{question:'<span class="inline-furi">石川県<i class="furigana">いしかわけん</i></span>',answers:["A20"]},{question:'<span class="inline-furi">福井県<i class="furigana">ふくいけん</i></span>',answers:["A21"]},{question:'<span class="inline-furi">岐阜県<i class="furigana">ぎふけん</i></span>',answers:["A22"]},{question:'<span class="inline-furi">愛知県<i class="furigana">あいちけん</i></span>',answers:["A23"]}];break;case 4:s="24-30",a=[{question:'<span class="inline-furi">滋賀県<i class="furigana">しがけん</i></span>',answers:["A24"]},{question:'<span class="inline-furi">三重県<i class="furigana">みえけん</i></span>',answers:["A25"]},{question:'<span class="inline-furi">京都府<i class="furigana">きょうとけん</i></span>',answers:["A26"]},{question:'<span class="inline-furi">大阪府<i class="furigana">おおさかふ</i></span>',answers:["A27"]},{question:'<span class="inline-furi">奈良県<i class="furigana">ならけん</i></span>',answers:["A28"]},{question:'<span class="inline-furi">和歌山県<i class="furigana">わかやまけん</i></span>',answers:["A29"]},{question:'<span class="inline-furi">兵庫県<i class="furigana">ひょうごけん</i></span>',answers:["A30"]}];break;case 5:s="31-39",a=[{question:'<span class="inline-furi">鳥取県<i class="furigana">とっとりけん</i></span>',answers:["A31"]},{question:'<span class="inline-furi">島根県<i class="furigana">しまねけん</i></span>',answers:["A32"]},{question:'<span class="inline-furi">岡山県<i class="furigana">おかやまけん</i></span>',answers:["A33"]},{question:'<span class="inline-furi">広島県<i class="furigana">ひろしまけん</i></span>',answers:["A34"]},{question:'<span class="inline-furi">山口県<i class="furigana">やまぐちけん</i></span>',answers:["A35"]},{question:'<span class="inline-furi">香川県<i class="furigana">かがわけん</i></span>',answers:["A36"]},{question:'<span class="inline-furi">徳島県<i class="furigana">とくしまけん</i></span>',answers:["A37"]},{question:'<span class="inline-furi">愛媛県<i class="furigana">えひめけん</i></span>',answers:["A38"]},{question:'<span class="inline-furi">高知県<i class="furigana">こうちけん</i></span>',answers:["A39"]}];break;case 6:s="40-47",a=[{question:'<span class="inline-furi">福岡県<i class="furigana">ふくおかけん</i></span>',answers:["A40"]},{question:'<span class="inline-furi">佐賀県<i class="furigana">さがけん</i></span>',answers:["A41"]},{question:'<span class="inline-furi">長崎県<i class="furigana">ながさきけん</i></span>',answers:["A42"]},{question:'<span class="inline-furi">大分県<i class="furigana">おおいたけん</i></span>',answers:["A43"]},{question:'<span class="inline-furi">熊本県<i class="furigana">くまもとけん</i></span>',answers:["A44"]},{question:'<span class="inline-furi">宮崎県<i class="furigana">みやざきけん</i></span>',answers:["A45"]},{question:'<span class="inline-furi">鹿児島県<i class="furigana">かごしまけん</i></span>',answers:["A46"]},{question:'<span class="inline-furi">沖縄県<i class="furigana">おきなわけん</i></span>',answers:["A47"]}];break;case 7:s="48-58",a=[{question:'<span class="inline-furi">沖縄（琉球舞踊）<i class="furigana">おきなわ（りゅうきゅうぶよう）</i></span>',answers:["A48"]},{question:'<span class="inline-furi">桜島<i class="furigana">さくらじま</i></span>',answers:["A49"]},{question:'<span class="inline-furi">長崎（平和の像）<i class="furigana">ながさき（へいわのぞう）</i></span>',answers:["A50"]},{question:'<span class="inline-furi">伊万里（伊万里焼）<i class="furigana">いまり（いまりやき）</i></span>',answers:["A51"]},{question:'<span class="inline-furi">広島（原爆ドーム）<i class="furigana">ひろしま（げんばくドーム）</i></span>',answers:["A52"]},{question:'<span class="inline-furi">京都（東寺）<i class="furigana">きょうと（とうじ）</i></span>',answers:["A53"]},{question:'<span class="inline-furi">姫路（姫路城）<i class="furigana">ひめじ（ひめじじょう）</i></span>',answers:["A54"]},{question:'<span class="inline-furi">日本アルプス<i class="furigana">にほんアルプス</i></span>',answers:["A55"]},{question:'<span class="inline-furi">札幌（雪祭り）<i class="furigana">さっぽろ（ゆくまつり）</i></span>',answers:["A56"]},{question:'<span class="inline-furi">松島<i class="furigana">まつしま</i></span>',answers:["A57"]},{question:'<span class="inline-furi">日光（東照宮）<i class="furigana">にっこう（とうしょうぐう）</i></span>',answers:["A58"]}];break;case 8:s="59-69",a=[{question:'<span class="inline-furi">富士山<i class="furigana">ふじさん</i></span>',answers:["A59"]},{question:'<span class="inline-furi">白川郷<i class="furigana">しらかわごう</i></span>',answers:["A60"]},{question:'<span class="inline-furi">奈良（大仏）<i class="furigana">なら（だいぶつ）</i></span>',answers:["A61"]},{question:'<span class="inline-furi">大阪<i class="furigana">おおさか</i></span>',answers:["A62"]},{question:'<span class="inline-furi">名古屋<i class="furigana">なごや</i></span>',answers:["A63"]},{question:'<span class="inline-furi">鎌倉<i class="furigana">かまくら</i></span>',answers:["A64"]},{question:'<span class="inline-furi">横浜<i class="furigana">よこはま</i></span>',answers:["A65"]},{question:'<span class="inline-furi">東京<i class="furigana">とうきょう</i></span>',answers:["A66"]},{question:'<span class="inline-furi">金沢<i class="furigana">かなざわ</i></span>',answers:["A67"]},{question:'<span class="inline-furi">琵琶湖<i class="furigana">びわこ</i></span>',answers:["A68"]},{question:'<span class="inline-furi">神戸<i class="furigana">こうべ</i></span>',answers:["A69"]}]}for((s=s.split("-"))[0]=+s[0],s[1]=+s[1],d=[];s[0]<=s[1];s[0]++)d.push(s[0]);for(;a.length;){for(a[l=Math.floor(Math.random()*a.length)].question="Where is "+a[l].question+" located on the map?",t=3,(n=d.slice()).splice(n.indexOf(+a[l].answers[0].replace("A","")),1);t-- >0;)r=Math.floor(Math.random()*n.length),a[l].answers.push(n[r]),n.splice(r,1);f.push(a[l]),a.splice(l,1)}c.innerHTML=c.innerHTML.replace(/- .*/,"- "+u),i.getElementById("appendix-tool").style.display="none",i.getElementById("exercise").style.display="",Genki.generateQuiz({type:"multi",info:"Look at the map and answer the questions about each location.</div>",quizlet:f})}})},finishedLoading:function(){var e=i.querySelector(".loading");e.className=e.className.replace("loading","")}},i.getElementById("appendix-tool").appendChild(i.querySelector(".more-exercises").cloneNode(!0))}(window,document);